<%= javascript_include_tag 'image_preview.js' %>
<%= form_for(@plan, url: yield(:url) ) do |f| %>

  <%= f.label :タイトル %>
  <%= f.text_field :title, class: 'form-control' %>

  <label>行程</label>
  <ol style="text-align: center;">
    <%= f.fields_for :destinations do |destinations_form| %>
      <li style="display:inline-flex">
        <div class="col-4">
          <%= destinations_form.time_field :time, class: 'form-control' %>
        </div>

        <div class="col-5">
          <%= destinations_form.text_field :name, class: 'form-control' %>
        </div>

        <div class="view_box" style="display:flex;">
          <%= image_tag '/Fileicon.jpg',class: 'select_file_image',onClick: "$('#file#{destinations_form.index}').click()" %>
          <%= destinations_form.file_field :picture, style: 'display: none;',id:"file#{destinations_form.index}", class: 'form-control file', accept: 'image/jpeg,image/gif,image/png'%>
        </div>

      </li>
    <% end %>
  </ol>
  <span class="picture">
    <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
  </span>
  <div class="publish-buttons">
    <label><%= f.radio_button :published, true %>公開する</label>
    <label><%= f.radio_button :published, false %>非公開にする</label>
  </div>

  <%= f.button yield(:button_text), type: 'button',onClick: 'submit();', style: 'width:100%;', class: "btn btn-primary" %>
<% end %>

<script type="text/javascript">
  $('#micropost_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script>
